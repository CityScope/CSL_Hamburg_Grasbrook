<div class="layer-control map-control-element">
  <span class=" nowrap">
    <span class="heading">Layers</span>&nbsp;
    <a
            class="collapse-button"
            (click)="collapsed_main = !collapsed_main"
            href="javascript:void(0)"
    >
      <i *ngIf="collapsed_main" class="icon-info material-icons menu-icons white"
      >expand_less</i
      >
      <i *ngIf="!collapsed_main" class="icon-info material-icons menu-icons white"
      >expand_more</i
      >
    </a>
  </span>
    <ul *ngIf="!collapsed_main" class="layer-list">
        <li *ngFor="let layer of layers">
            <label *ngIf="layer.showInLayerList">
                <i *ngIf="layer.legend"
                        class="icon-info material-icons menu-icons white"
                        (click)="onShowInfo($event, layer)"
                        matTooltipPosition="right"
                        matTooltip="Legend could be displayed on click"
                >info</i>
                <input  *ngIf="layer.groupedLayers.length === 0"
                        type="checkbox"
                        [checked]="layer.visible"
                        (change)="onToggleLayer(layer)"
                />
                {{ layer.displayName }}
                <a *ngIf="layer.groupedLayers.length > 0"
                        class="collapse-button"
                        (click)="onCollapseGroupedLayer($event, layer)"
                        href="javascript:void(0)"
                >
                    <i *ngIf="isLayerGroupOpened(layer)" class="icon-info material-icons menu-icons white"
                    >expand_less</i
                    >
                    <i *ngIf="!isLayerGroupOpened(layer)" class="icon-info material-icons menu-icons white"
                    >expand_more</i
                    >
                choose
                </a>
            </label>

            <ul *ngIf="layer.groupedLayers.length > 0 && isLayerGroupOpened(layer)">
                <mat-button-toggle-group #group="matButtonToggleGroup" [(ngModel)]="walkabilitytype" (change)="onChangeWalkType(walkabilitytype)">
                    <mat-button-toggle value="walking" aria-label="Walking">
                        <img #strtypeicon src="assets\images\icons_grasbrook_walkability_walk.svg" alt="Walking" height="30px"/>
                    </mat-button-toggle>
                    <mat-button-toggle value="stroller" aria-label="Stroller">
                        <img #strtypeicon src="assets\images\icons_grasbrook_walkability_child_friendly.svg" alt="Stroller" height="30px"/>
                    </mat-button-toggle>
                    <mat-button-toggle value="wheelchair" aria-label="Wheelchair">
                        <img #strtypeicon src="assets\images\icons_grasbrook_walkability_accessible.svg" alt="Stroller" height="30px"/>
                    </mat-button-toggle>
                </mat-button-toggle-group>
                Add list [schools, cultural, grocery] here - choose layer by layerID (walkability_walking_grocery)
                <li *ngFor="let sublayer of layer.groupedLayers">
                    <label>
                        <input  type="checkbox"
                                [checked]="layer.visible"
                                (change)="onToggleLayer(sublayer)"/>
                        {{ sublayer.displayName }}
                    </label>
                </li>
            </ul>
            <mat-spinner *ngIf="layer.isLoading" [diameter]="15">
            </mat-spinner>
        </li>
    </ul>
</div>
